<!doctype html>
<html>
<head>
<title>Chess!</title>

<style type="text/css">
* { 
	border: 0;
	margin: 0;
	padding: 0;
}
.board {
	width: 660px;
	height: 660px;

}	
.square {
	width: 80px;
	height: 80px;
	border: 1px solid #000;
	float: left;
}
input[type=text] {
	border: 1px solid #000;
}
</style>

</head>
<body>
<div id="board" class="board">

</div> 
<div class="controlpanel">
	<label for="fen">FEN</label>
	<input type="text" size="100" id="fen" class="fen" value="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1" />
	<input type="button" value="submit" id="submitfen" />
</div>


<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<script>

var board = {
	parsefen: function(fen) {
		var fenparts = fen.split(" ");
		positions = fenparts[0].split("/");
		var row = 7;
		var col = 0;
		for(var i in positions) {
			for(var p in positions[i]) {
				this_position = positions[i][p];
				this_position_code = this_position.charCodeAt();
				if(this_position_code > 47 && this_position_code < 58) {
					col += +this_position;
				} else {
					$(".square").eq(row * 8 + col).text(this_position);
				}
			}
			row--;
		}
	}
};

$(document).ready(function(){
	var html = '';
	for(var r = 0; r < 64; r++) {
		html += '<div class="square">&nbsp;</div>';
	}
	$("#board").html(html);
	html = '';

	$("#submitfen").click(function() {
		board.parsefen($("#fen").val());
	});
});

</script>

</body>
</html>